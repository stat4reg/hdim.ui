library(devtools)
install.packages(hdim.ui)
install.packages("hdim.ui")
?hdim.ui
??hdim.ui
setwd("C:/Users/Nimo0033/OneDrive/PhD/validui/code/final/github")
# install_github("stat4reg/hdim.ui")
install("hdim.ui")
getwd()
# install_github("stat4reg/hdim.ui")
install("hdim.ui")
document("hdim.ui")
setwd("C:/Users/Nimo0033/OneDrive/PhD/validui/code/final/Paper four")
library(foreign)
data=read.dta("C_2010_JOE-dataRS5K.dta")
length(names(data))
#Kennedy's choice of variables
# (1) age, (2) education (less than high school, high
#                         school, greater than high school), (3) white (yes/no), (4) hispanic (yes/no), (5) foreign (yes/no),
# (6) alcohol use, (7) married (yes/no), (8) liver birth order (one, two, greater than 2), (9) number
# of prenatal visits.3
categoricalCovariates=c("dmar","mwhite","mhispan","foreignb","alcohol","dmeduc","dlivord")
#quantitative
continuousCovariates=c("dmage","nprevist")
newData= data[,c("T","dbirwt",categoricalCovariates,continuousCovariates)]
newData$dmeduc[data$dmeduc <12] = "lthighschool"
newData$dmeduc[data$dmeduc == 12] = "highschool"
newData$dmeduc[data$dmeduc >12] = "mthighschool"
newData$dmeduc=as.factor(newData$dmeduc)
newData$dlivord[data$dlivord ==1] = "one"
newData$dlivord[data$dlivord ==2] = "two"
newData$dlivord[data$dlivord >2] = "gttwo"
newData$dlivord=as.factor(newData$dlivord)
length(names(newData))
withInteractions= model.matrix(~ .^2, data = newData[,c(categoricalCovariates,continuousCovariates)])[,-1]
higherorder=poly(cbind(newData[,"dmage"], newData[,"nprevist"]),degree=3)
length(names(newData))
# remove dmage and nprevist interaction bewteen them since it is included in withInteractions
higherorder=higherorder[,-c(1,4,5)]
covariates=cbind(withInteractions,higherorder)
ncol(covariates)
Y=newData[,"dbirwt"]
T=ifelse(newData[,"T"]>=1,1,0)
ui_real=ui.causal(X=covariates,Y=(Y),T=(T),rho0=c(-0.15,0.15),rho1=c(-0.15,0.15),
# subset="double",
subset = "refit", sigma_correction = 'new',
param="ACE", rho.plotrange = c(-0.25, 0.25),regularization_alpha = 1)
plot(ui_real,ylab="ACE")
setwd("C:/Users/Nimo0033/OneDrive/PhD/validui/code/final/github")
# install_github("stat4reg/hdim.ui")
install("hdim.ui")
ui_real=ui.causal(X=covariates,Y=(Y),T=(T),rho0=c(-0.15,0.15),rho1=c(-0.15,0.15),
# subset="double",
subset = "refit", sigma_correction = 'new',
param="ACE", rho.plotrange = c(-0.25, 0.25),regularization_alpha = 1)
setwd("C:/Users/Nimo0033/OneDrive/PhD/validui/code/final/github")
# install_github("stat4reg/hdim.ui")
install("hdim.ui")
document("hdim.ui")
ui_real=ui.causal(X=covariates,Y=(Y),T=(T),rho0=c(-0.15,0.15),rho1=c(-0.15,0.15),
# subset="double",
subset = "refit", sigma_correction = 'new',
param="ACE", rho.plotrange = c(-0.25, 0.25),regularization_alpha = 1)
